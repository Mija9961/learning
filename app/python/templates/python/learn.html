
{% extends "base.html" %}

{% block link %}
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/python/interview_page.css') }}" />

  <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
  <!-- CodeMirror CSS & JS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/python/python.min.js"></script>

  <!-- Bootstrap Icons CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
{% endblock %}

{% block title %}Python | Learn{% endblock %}

{% block content %}
  <h1 class="heading">
    Professor Python
    <i 
      class="bi bi-question-circle-fill" 
      tabindex="0"
      data-bs-toggle="tooltip" 
      data-bs-placement="right" 
      data-bs-trigger="hover focus click"
      title="Professor Python is your AI tutor, here to help you learn Python.
      To begin your session, just say something like 'Hi' or 'Hello'."
      style="cursor: pointer; font-size: 0.6em; margin-left: 2px;"
    ></i>
  </h1>
  <br>
  <div id="videoContainer">
    <video id="preview" autoplay muted></video>
  </div>

  <div id="chat-box">
    {% for m in messages %}
      <div class="user-message">{{ m.user }}</div>
      <div class="bot-message"><button class="speak-btn" onclick="speakText(this)">ğŸ”Š</button>{{ m.bot | safe | e}}</div>
    {% endfor %}
  </div>
  

  <form id="chat-form">
    <input type="text" id="message" name="message" required autocomplete="off" placeholder="Type your message..." />
    <button type="submit">Send</button>
  </form>
  <hr>
  <div id="transcriptBox">ğŸ¤ <strong>Live Transcription:</strong> <em>Not active</em></div>

  <div id="controls">
    <input type="checkbox" id="autoSendToggle" />
    <label for="autoSendToggle">Auto-send transcribed speech</label>
    <br>
    <button id="startVoiceBtn">ğŸ™ Start Voice Input</button>
    <button id="chatShowHideBtn" type="button">ğŸ™ˆ Hide Chat</button>
    <button id="showEditorBtn" type="button">ğŸ§  Show Code Editor</button>
    <button id="download-btn" type="button">ğŸ’¾ Download Chat</button>
    <button id="downloadVideoBtn" type="button">ğŸ“¹ Record Video</button>
    <button id="downloadScreenBtn" type="button">ğŸ–¥ï¸ Record Screen</button>

  </div>

    <!-- Modal -->
<div class="modal fade" id="codeEditorModal" tabindex="-1" aria-labelledby="editorModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Python Code Editor</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        
        <!-- <button id="copyCodeBtn" class="btn btn-sm btn-primary mb-2">ğŸ“‹ Copy Code</button> -->
        <!-- <textarea id="pythonCode" class="form-control" rows="10" placeholder="Write Python code here...">print("Hello from Pyodide!")</textarea> -->
         <!-- <textarea id="pythonCode"></textarea> -->
          <div style="width: 100%; max-width: 100%;">
            <textarea id="pythonCode"></textarea>
          </div>

        <button id="runPythonBtn" class="btn btn-success mt-2">Run</button>
        <button id="copyCodeBtn" class="btn btn-sm btn-secondary mt-2">ğŸ“‹ Copy</button>


        <pre id="pythonOutput" class="mt-3 bg-light p-3 rounded" style="min-height: 100px;"></pre>
      </div>
    </div>
  </div>
</div>


  <!-- AI Avatar -->
  <div id="avatar" class="avatar" title="I'm Professor Python! Drag me around!"></div>

{% endblock %}

{% block script %}
  <script src="{{ url_for('static', filename='js/python/learn.js') }}"></script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}